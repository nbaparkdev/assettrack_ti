{% extends "auth/scanner.html" %}

{% block content %}
<div class="space-y-6 fade-in">
    <!-- Header Block -->
    <div class="border-2 border-black bg-white p-6 shadow-[8px_8px_0px_0px_rgba(0,0,0,0.1)] text-center">
        <span class="font-mono text-xs text-gray-400 uppercase tracking-widest block mb-2">Autentica√ß√£o Segura //</span>
        <h1 class="text-3xl font-black text-black uppercase tracking-tighter leading-none">Confirmar Identidade</h1>
    </div>

    <div class="max-w-md mx-auto">
        <form action="/login/qr-confirm" method="post"
            class="bg-white border-2 border-black p-0 shadow-[8px_8px_0px_0px_rgba(0,0,0,0.2)]">

            <div
                class="bg-amber-400 text-black p-4 font-bold uppercase text-xs tracking-widest border-b-2 border-black flex justify-between items-center">
                <span>PIN Obrigat√≥rio</span>
                <span class="text-xl">üî¢</span>
            </div>

            {% if error %}
            <div class="bg-red-100 text-red-700 p-4 border-b-2 border-red-200 text-xs font-bold uppercase text-center">
                ‚ö† {{ error }}
            </div>
            {% endif %}

            <div class="p-8 space-y-6 text-center">
                <div>
                    <div
                        class="w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4 border-2 border-black">
                        {% if user_avatar %}
                        <img src="{{ user_avatar }}" class="w-full h-full rounded-full object-cover">
                        {% else %}
                        <span class="text-xl font-bold">{{ user_initials }}</span>
                        {% endif %}
                    </div>
                    <h3 class="font-bold text-lg uppercase">{{ user_name }}</h3>
                    <p class="font-mono text-xs text-gray-500 uppercase">{{ user_role }}</p>
                </div>

                <div class="text-left">
                    <label for="pin" class="block text-[10px] font-bold uppercase text-gray-500 mb-1 text-center">Digite
                        seu PIN de 4-6 d√≠gitos</label>
                    <input type="password" name="pin" id="pin" maxlength="6" pattern="\d{4,6}" inputmode="numeric"
                        required autofocus
                        class="block w-full px-4 py-3 bg-gray-50 border-2 border-gray-200 rounded-none focus:border-black focus:ring-0 transition font-mono tracking-[0.5em] text-center text-xl"
                        placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    <input type="hidden" name="token" value="{{ token }}">
                </div>

                <div class="pt-2">
                    <button type="submit"
                        class="w-full bg-black border-2 border-black text-white py-3 font-bold uppercase text-sm tracking-widest hover:bg-gray-800 transition shadow-[4px_4px_0px_0px_rgba(0,0,0,0.2)] hover:shadow-none hover:translate-x-[2px] hover:translate-y-[2px]">
                        Confirmar Acesso
                    </button>
                    <a href="/login"
                        class="block mt-4 text-[10px] font-bold uppercase text-gray-400 hover:text-red-600 transition">Cancelar</a>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}